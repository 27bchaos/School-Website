<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>US Gov Cup Drop Quiz</title>
<style>
body { font-family: sans-serif; background:#e3eefc; text-align:center; margin:0; overflow-x:hidden;}
h1{color:#1a3c6d; margin-top:20px;}
button{margin:5px;padding:10px 18px;border:none;border-radius:6px;background:#1a3c6d;color:white;cursor:pointer;font-size:16px;}
button:hover{background:#345b8c;}
#playerSelect, #gameContainer{margin-top:20px;}
#questionBox{background:#fff;padding:20px;margin:0 auto;width:60%;border-radius:10px;box-shadow:0 0 10px #aaa;}
#answers button{display:block;width:200px;margin:5px auto;}
#scoreBoard{margin-top:20px;font-size:18px;color:#1a3c6d;}
#cupContainer{position:relative; width:600px; height:400px; margin:30px auto; background:#d0f0f0; border:2px solid #1a3c6d; border-radius:10px; overflow:hidden;}
.cup{position:absolute; bottom:0; width:80px; height:60px; border-radius:10px; text-align:center; color:white; font-weight:bold; line-height:60px;}
.ball{position:absolute; width:10px; height:10px; border-radius:50%; background:black;}
</style>
</head>
<body>

<h1>üéØ US Gov Cup Drop</h1>

<div id="playerSelect">
  <h3>Select Mode:</h3>
  <button onclick="startSingle()">Single Player</button>
  <button onclick="startMulti()">Multiplayer</button>
</div>

<div id="gameContainer" style="display:none;">
  <div id="questionBox">
    <h2 id="question"></h2>
    <div id="answers"></div>
  </div>

  <div id="scoreBoard"></div>

  <div id="cupContainer"></div>

  <h2 id="result"></h2>
</div>

<script>
// === QUESTIONS ===
const questions = [
  {q:"Which branch of government makes the laws?", a:["Legislative","Executive","Judicial"], c:0},
  {q:"Which branch enforces the laws?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"Which branch interprets the laws?", a:["Judicial","Executive","Legislative"], c:0},
  {q:"Congress is part of which branch?", a:["Judicial","Legislative","Executive"], c:1},
  {q:"The President leads which branch?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"The Supreme Court is part of which branch?", a:["Executive","Judicial","Legislative"], c:1},
];

let players = [];
let currentPlayer = 0;
let index = 0;
let earnedCups = 0;

const qBox = document.getElementById('question');
const ansBox = document.getElementById('answers');
const result = document.getElementById('result');
const gameContainer = document.getElementById('gameContainer');
const playerSelect = document.getElementById('playerSelect');
const scoreBoard = document.getElementById('scoreBoard');
const cupContainer = document.getElementById('cupContainer');

// === START GAME ===
function startSingle() { players = [{name:"Player 1", score:0}]; startGame(); }
function startMulti() {
  const p1 = prompt("Enter Player 1 Name:", "Player 1");
  const p2 = prompt("Enter Player 2 Name:", "Player 2");
  players = [{name:p1||"Player 1", score:0},{name:p2||"Player 2", score:0}];
  startGame();
}

function startGame(){
  playerSelect.style.display="none";
  gameContainer.style.display="block";
  index=0; currentPlayer=0;
  earnedCups=0;
  renderScore();
  loadQuestion();
}

function renderScore(){
  scoreBoard.innerHTML = players.map(p=>`${p.name}: ${p.score}`).join(" | ");
}

// === LOAD QUESTIONS ===
function loadQuestion(){
  if(index >= questions.length){
    // all questions done ‚Üí drop balls
    startCupDrop();
    return;
  }
  const q = questions[index];
  qBox.textContent = `${players[currentPlayer].name}'s turn: ${q.q}`;
  ansBox.innerHTML = "";
  q.a.forEach((opt,i)=>{
    let btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = ()=>checkAnswer(i);
    ansBox.appendChild(btn);
  });
}

function checkAnswer(i){
  if(i !== questions[index].c){
    alert("‚ùå Incorrect! No cup earned.");
  } else {
    alert("‚úÖ Correct! You earned a cup!");
    earnedCups++;
  }
  index++;
  currentPlayer = (currentPlayer+1)%players.length;
  loadQuestion();
}

// === CUP DROP ===
function startCupDrop(){
  qBox.textContent = "üéâ Balls are dropping!";
  ansBox.innerHTML = "";

  cupContainer.innerHTML = "";
  const cupColors = [
    {color:"red", points:10},
    {color:"green", points:25},
    {color:"gold", points:50}
  ];

  const cupCount = earnedCups;
  const cupSpacing = 600 / (cupCount+1);

  let cups = [];
  for(let i=0;i<cupCount;i++){
    const cup = document.createElement("div");
    cup.className="cup";
    cup.style.left = (cupSpacing*(i+1)-40)+"px";
    cup.style.background = cupColors[i%cupColors.length].color;
    cup.dataset.points = cupColors[i%cupColors.length].points;
    cup.textContent = cup.dataset.points;
    cupContainer.appendChild(cup);
    cups.push(cup);
  }

  // DROP 100 BALLS
  const balls = [];
  for(let i=0;i<100;i++){
    const ball = document.createElement("div");
    ball.className="ball";
    ball.style.left = (Math.random()*580)+"px";
    ball.style.bottom = "380px";
    cupContainer.appendChild(ball);
    balls.push(ball);
  }

  // Animate balls falling
  let landed = 0;
  balls.forEach(ball=>{
    let vy = -Math.random()*2-2; // random initial speed
    let interval = setInterval(()=>{
      let bottom = parseFloat(ball.style.bottom);
      bottom += vy;
      vy -= 0.1; // gravity
      if(bottom <= 0){
        bottom = 0;
        clearInterval(interval);
        // check which cup it landed in
        cups.forEach(cup=>{
          const cupLeft = parseFloat(cup.style.left);
          if(parseFloat(ball.style.left) > cupLeft && parseFloat(ball.style.left) < cupLeft + 80){
            players[currentPlayer].score += parseInt(cup.dataset.points);
            renderScore();
          }
        });
        ball.remove();
        landed++;
        if(landed === balls.length){
          endGame();
        }
      }
      ball.style.bottom = bottom+"px";
    }, 20);
  });
}

// === END GAME ===
function endGame(){
  let winner = players.reduce((a,b)=>a.score>b.score?a:b);
  result.textContent = `üèÅ Game Over! Winner: ${winner.name} üéâ`;
}
</script>
