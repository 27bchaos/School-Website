<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>US Gov Dart Challenge - GamePigeon Style</title>
<style>
body { font-family: sans-serif; background:#e3eefc; text-align:center; margin:0; }
h1{color:#1a3c6d; margin-top:20px;}
#playerSelect, #gameContainer{margin-top:20px;}
button{margin:5px;padding:10px 18px;border:none;border-radius:6px;background:#1a3c6d;color:white;cursor:pointer;font-size:16px;}
button:hover{background:#345b8c;}
#questionBox{background:#fff;padding:20px;margin:0 auto;width:60%;border-radius:10px;box-shadow:0 0 10px #aaa;}
#answers button{display:block;width:200px;margin:5px auto;}
#dartContainer{position:relative; margin:30px auto; width:400px; height:400px; border-radius:50%; overflow:hidden; background:#eee;}
.dart{width:12px;height:12px;background:black;position:absolute;border-radius:50%;}
#controls{margin-top:20px;}
#powerBar{height:20px;width:200px;background:lightgray;border-radius:5px;margin:10px auto;overflow:hidden;}
.power{height:100%;width:0%;background:limegreen;}
#scoreBoard{margin-top:20px;font-size:18px;color:#1a3c6d;}
.firework{position:absolute;width:4px;height:4px;background:yellow;border-radius:50%;}
</style>
</head>
<body>

<h1>ðŸŽ¯ US Gov Dart Challenge</h1>
<div id="playerSelect">
  <h3>Select Mode:</h3>
  <button onclick="startSingle()">Single Player</button>
  <button onclick="startMulti()">Multiplayer</button>
</div>

<div id="gameContainer" style="display:none;">
  <div id="questionBox">
    <h2 id="question"></h2>
    <div id="answers"></div>
  </div>

  <div id="scoreBoard"></div>

  <div id="dartContainer"></div>

  <div id="controls">
    <h3>Drag to set power & angle, release to throw!</h3>
    <div id="powerBar"><div class="power" id="powerFill"></div></div>
    <p id="windInfo"></p>
  </div>

  <h2 id="result"></h2>
</div>

<script>
const questions = [
  {q:"Which branch of government makes the laws?", a:["Legislative","Executive","Judicial"], c:0},
  {q:"Which branch enforces the laws?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"Which branch interprets the laws?", a:["Judicial","Executive","Legislative"], c:0},
  {q:"Congress is part of which branch?", a:["Judicial","Legislative","Executive"], c:1},
  {q:"The President leads which branch?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"The Supreme Court is part of which branch?", a:["Executive","Judicial","Legislative"], c:1},
  {q:"What is the main responsibility of the Legislative Branch?", a:["Enforce laws","Make laws","Interpret laws"], c:1},
  {q:"Who helps the President run the Executive Branch?", a:["Congress","Cabinet","Supreme Court"], c:1},
  {q:"Which branch can declare laws unconstitutional?", a:["Judicial","Legislative","Executive"], c:0},
  {q:"Which branch approves the federal budget?", a:["Executive","Legislative","Judicial"], c:1},
  {q:"Who can issue executive orders?", a:["Congress","President","Supreme Court"], c:1},
  {q:"What does the Judicial Branch use to review laws?", a:["Judicial review","Impeachment","Treaties"], c:0},
  {q:"Which branch conducts oversight investigations?", a:["Legislative","Judicial","Executive"], c:0},
  {q:"Recognizing foreign nations is a duty of which branch?", a:["Executive","Legislative","Judicial"], c:0},
  {q:"Who sentences offenders and establishes judicial procedures?", a:["Congress","Supreme Court","President"], c:1},
];

let players = [];
let currentPlayer = 0;
let index = 0;
let dartContainer = document.getElementById('dartContainer');
let powerFill = document.getElementById('powerFill');
let isDragging = false;
let startX = 0;
let startY = 0;
let angle = 0;
let power = 0;
let currentDart = null;
let wind = 0;

const qBox = document.getElementById('question');
const ansBox = document.getElementById('answers');
const result = document.getElementById('result');
const gameContainer = document.getElementById('gameContainer');
const playerSelect = document.getElementById('playerSelect');
const scoreBoard = document.getElementById('scoreBoard');
const windInfo = document.getElementById('windInfo');

// Player setup
function startSingle() { players = [{name:"Player 1", score:0}]; startGame(); }
function startMulti() {
  const p1 = prompt("Enter Player 1 Name:", "Player 1");
  const p2 = prompt("Enter Player 2 Name:", "Player 2");
  players = [{name:p1||"Player 1", score:0},{name:p2||"Player 2", score:0}];
  startGame();
}

// Game flow
function startGame(){
  playerSelect.style.display="none";
  gameContainer.style.display="block";
  index=0; currentPlayer=0;
  renderScore();
  loadQuestion();
}

function renderScore(){
  scoreBoard.innerHTML = players.map(p=>`${p.name}: ${p.score}`).join(" | ");
}

function loadQuestion(){
  if(index >= questions.length){ endGame(); return; }
  const q = questions[index];
  qBox.textContent = `${players[currentPlayer].name}'s turn: ${q.q}`;
  ansBox.innerHTML = "";
  q.a.forEach((opt,i)=>{
    let btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = ()=>checkAnswer(i);
    ansBox.appendChild(btn);
  });
  wind = (Math.random()-0.5)*20;
  windInfo.textContent = `Wind: ${wind.toFixed(1)} units`;
}

// Check answer & update score
function checkAnswer(i){
  if(i === questions[index].c){
    players[currentPlayer].score += 10; // bonus for correct answer
  }
  renderScore();
  prepareDart();
}

// Dart mechanics
function prepareDart(){
  dartContainer.innerHTML = "";
  currentDart = document.createElement("div");
  currentDart.className="dart";
  currentDart.style.left = "190px";
  currentDart.style.bottom = "0px";
  dartContainer.appendChild(currentDart);
  setupDrag();
}

function setupDrag(){
  isDragging=false;
  dartContainer.onmousedown = (e)=>{
    isDragging = true;
    startX = e.offsetX;
    startY = e.offsetY;
    power=0;
    powerFill.style.width="0%";
  };
  dartContainer.onmousemove = (e)=>{
    if(isDragging){
      let dx = e.offsetX - startX;
      let dy = startY - e.offsetY;
      angle = Math.atan2(dy, dx);
      power = Math.min(Math.sqrt(dx*dx+dy*dy), 100);
      powerFill.style.width = power+"%";
    }
  };
  dartContainer.onmouseup = (e)=>{
    if(isDragging){
      isDragging=false;
      powerFill.style.width="0%";
      throwDart(angle,power);
    }
  };
}

// Throw dart with physics
function throwDart(a,p){
  let velX = p*Math.cos(a)/2;
  let velY = p*Math.sin(a)/2;
  let dart = currentDart;
  let posX = 190;
  let posY = 0;
  let interval = setInterval(()=>{
    velY -= 0.5; // gravity
    posX += velX + wind*0.05;
    posY += velY;
    dart.style.left = posX+"px";
    dart.style.bottom = posY+"px";
    if(posY<=0){
      posY=0;
      clearInterval(interval);
      scoreDart(posX,posY);
      nextTurn();
    }
  },20);
}

// Score calculation based on dartboard rings
function scoreDart(x,y){
  let centerX = 200;
  let centerY = 200;
  let dx = x - centerX;
  let dy = y - centerY;
  let dist = Math.sqrt(dx*dx + dy*dy);
  let points=0;
  if(dist<=40) points=50; // red bullseye
  else if(dist<=120) points=25; // inner white
  else if(dist<=200) points=10; // blue
  players[currentPlayer].score += points;
  renderScore();
  if(points>0) fireworks(centerX,200);
}

// Fireworks effect
function fireworks(x,y){
  for(let i=0;i<30;i++){
    let f = document.createElement("div");
    f.className="firework";
    f.style.left = x+"px";
    f.style.bottom = y+"px";
    dartContainer.appendChild(f);
    let angle = Math.random()*2*Math.PI;
    let speed = Math.random()*5+2;
    let interval = setInterval(()=>{
      let left = parseFloat(f.style.left);
      let bottom = parseFloat(f.style.bottom);
      f.style.left = left + speed*Math.cos(angle) + "px";
      f.style.bottom = bottom + speed*Math.sin(angle) + "px";
      speed *=0.95;
    },20);
    setTimeout(()=>f.remove(),1000);
  }
}

// Next player/question
function nextTurn(){
  currentPlayer++;
  if(currentPlayer >= players.length){
    currentPlayer=0;
    index++;
  }
  loadQuestion();
}

// End game
function endGame(){
  qBox.textContent="All questions answered!";
  ansBox.innerHTML="";
  result.textContent="Game over!";
  let winner = players.reduce((a,b)=>a.score>b.score?a:b);
  scoreBoard.innerHTML += `<br>Winner: ${winner.name} with ${winner.score} points!`;
}
</script>

</body>
</html>
