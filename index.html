<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>US Gov Dart Challenge - Advanced</title>
<style>
body { font-family: sans-serif; background: #e3eefc; text-align:center; margin:0; padding:0;}
h1{color:#1a3c6d; margin-top:20px;}
#playerSelect, #gameContainer{margin-top:20px;}
button{margin:5px;padding:10px 18px;border:none;border-radius:6px;background:#1a3c6d;color:white;cursor:pointer;}
button:hover{background:#345b8c;}
#questionBox{background:#fff;padding:20px;margin:0 auto;width:70%;border-radius:10px;box-shadow:0 0 15px #aaa;}
#dartboard{position:relative;margin:30px auto;width:400px;height:400px;border-radius:50%;background:radial-gradient(circle, red 0 40px, white 40px 100px, blue 100px 200px, white 200px 220px);overflow:hidden;}
.dart{width:12px;height:30px;background:black;position:absolute;border-radius:3px;bottom:0;}
#powerWindControls{margin:20px;}
#scoreBoard{margin-top:20px;font-weight:bold;}
#countdown{font-size:18px;font-weight:bold;color:#1a3c6d;}
#result{margin-top:15px;font-size:20px;color:#1a3c6d;}
.playerDashboard{display:inline-block;width:150px;background:#fff;border-radius:10px;padding:10px;margin:5px;box-shadow:0 0 5px #aaa;}
</style>
</head>
<body>

<h1>ðŸŽ¯ US Gov Dart Challenge - Advanced</h1>

<div id="playerSelect">
  <h3>Select Mode:</h3>
  <button onclick="startSingle()">Single Player</button>
  <button onclick="startMulti()">Multiplayer</button>
</div>

<div id="gameContainer" style="display:none;">
  <div id="questionBox">
    <h2 id="question"></h2>
    <div id="answers"></div>
  </div>

  <div id="powerWindControls" style="display:none;">
    <div>
      <label>Power:</label>
      <input type="range" id="powerSlider" min="10" max="100" value="50">
    </div>
    <div>
      <label>Wind:</label>
      <input type="range" id="windSlider" min="-50" max="50" value="0">
    </div>
    <div>
      <label>Angle:</label>
      <input type="range" id="angleSlider" min="10" max="80" value="45">
    </div>
    <button onclick="startDartCountdown()">Launch Dart</button>
    <p id="countdown"></p>
  </div>

  <div id="scoreBoard"></div>

  <div id="dartboard"></div>

  <h2 id="result"></h2>
</div>

<script>
const questions = [
  {q:"Which branch of government makes the laws?", a:["Legislative","Executive","Judicial"], c:0},
  {q:"Which branch enforces the laws?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"Which branch interprets the laws?", a:["Judicial","Executive","Legislative"], c:0},
  {q:"Congress is part of which branch?", a:["Judicial","Legislative","Executive"], c:1},
  {q:"The President leads which branch?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"The Supreme Court is part of which branch?", a:["Executive","Judicial","Legislative"], c:1},
  {q:"What is the main responsibility of the Legislative Branch?", a:["Enforce laws","Make laws","Interpret laws"], c:1},
  {q:"Who helps the President run the Executive Branch?", a:["Congress","Cabinet","Supreme Court"], c:1},
  {q:"Which branch can declare laws unconstitutional?", a:["Judicial","Legislative","Executive"], c:0},
  {q:"Which branch approves the federal budget?", a:["Executive","Legislative","Judicial"], c:1},
  {q:"Who can issue executive orders?", a:["Congress","President","Supreme Court"], c:1},
  {q:"What does the Judicial Branch use to review laws?", a:["Judicial review","Impeachment","Treaties"], c:0},
  {q:"Which branch conducts oversight investigations?", a:["Legislative","Judicial","Executive"], c:0},
  {q:"Recognizing foreign nations is a duty of which branch?", a:["Executive","Legislative","Judicial"], c:0},
  {q:"Who sentences offenders and establishes judicial procedures?", a:["Congress","Supreme Court","President"], c:1},
];

let players = [];
let currentPlayer = 0;
let index = 0;
let countdownTimer;

const qBox = document.getElementById('question');
const ansBox = document.getElementById('answers');
const result = document.getElementById('result');
const gameContainer = document.getElementById('gameContainer');
const playerSelect = document.getElementById('playerSelect');
const dartboard = document.getElementById('dartboard');
const scoreBoard = document.getElementById('scoreBoard');
const powerWindControls = document.getElementById('powerWindControls');
const powerSlider = document.getElementById('powerSlider');
const windSlider = document.getElementById('windSlider');
const angleSlider = document.getElementById('angleSlider');
const countdownEl = document.getElementById('countdown');

function startSingle() {
  players = [{name:"Player 1", score:0}];
  startGame();
}

function startMulti() {
  const p1 = prompt("Enter Player 1 Name:", "Player 1");
  const p2 = prompt("Enter Player 2 Name:", "Player 2");
  players = [{name:p1||"Player 1", score:0},{name:p2||"Player 2", score:0}];
  startGame();
}

function startGame() {
  playerSelect.style.display="none";
  gameContainer.style.display="block";
  index=0;
  currentPlayer=0;
  renderScore();
  loadQuestion();
}

function renderScore(){
  scoreBoard.innerHTML = players.map(p=>`${p.name}: ${p.score}`).join(" | ");
}

function loadQuestion(){
  if(index >= questions.length){
    endGame();
    return;
  }
  const q = questions[index];
  qBox.textContent = `${players[currentPlayer].name}'s turn: ${q.q}`;
  ansBox.innerHTML = "";
  q.a.forEach((opt,i)=>{
    let btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = ()=>checkAnswer(i);
    ansBox.appendChild(btn);
  });
}

function checkAnswer(i){
  const q = questions[index];
  if(i === q.c){
    players[currentPlayer].score++;
  }
  renderScore();
  ansBox.innerHTML = "";
  qBox.textContent = `Set your dart: Power, Wind, Angle, ${players[currentPlayer].name}`;
  powerWindControls.style.display="block";
}

function startDartCountdown(){
  let countdown = 5;
  countdownEl.textContent = countdown;
  countdownTimer = setInterval(()=>{
    countdown--;
    countdownEl.textContent = countdown;
    if(countdown <= 0){
      clearInterval(countdownTimer);
      countdownEl.textContent="";
      powerWindControls.style.display="none";
      shootDart(powerSlider.value, windSlider.value, angleSlider.value);
    }
  }, 1000);
}

function shootDart(power, wind, angle){
  dartboard.innerHTML = "";
  const rad = angle * Math.PI / 180;
  players.forEach((p,i)=>{
    let dart = document.createElement("div");
    dart.className="dart";
    dartboard.appendChild(dart);
    // initial position
    let x0 = 200; 
    let y0 = 0;
    dart.style.left = x0 + "px";
    dart.style.bottom = y0 + "px";
    // simulate flight with physics (simplified)
    let t=0;
    const interval = setInterval(()=>{
      t += 0.05;
      let vx = Math.cos(rad) * power + parseFloat(wind);
      let vy = Math.sin(rad) * power - 0.5*t*t; // gravity
      let x = x0 + vx*t;
      let y = y0 + vy*t;
      if(y<=0){y=0; clearInterval(interval);}
      dart.style.left = x + "px";
      dart.style.bottom = y + "px";
    },20);
  });

  setTimeout(()=>{
    currentPlayer++;
    if(currentPlayer >= players.length){
      currentPlayer=0;
      index++;
    }
    if(index < questions.length){
      loadQuestion();
    } else {
      endGame();
    }
  }, 2000);
}

function endGame(){
  qBox.textContent = "All questions answered!";
  ansBox.innerHTML="";
  powerWindControls.style.display="none";
  result.textContent="Final Results:";
  let maxScore = Math.max(...players.map(p=>p.score));
  let winners = players.filter(p=>p.score===maxScore).map(p=>p.name).join(", ");
  result.textContent = `Winner(s): ${winners} with ${maxScore} correct!`;
}
</script>
</body>
</html>
