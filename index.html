<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>US Gov Dart Challenge - Advanced</title>
<style>
body { font-family: sans-serif; background:#e3eefc; text-align:center; }
h1{color:#1a3c6d;}
#gameContainer{margin-top:20px;}
#questionBox{background:#fff;padding:20px;margin:0 auto;width:60%;border-radius:10px;box-shadow:0 0 10px #aaa;}
button{margin:5px;padding:10px 18px;border:none;border-radius:6px;background:#1a3c6d;color:white;cursor:pointer;}
button:hover{background:#345b8c;}
#dartboard{margin:30px auto;width:400px;height:400px;border-radius:50%;background:radial-gradient(circle, red 0 40px, yellow 40px 80px, green 80px 120px, blue 120px 160px, white 160px 200px);position:relative;overflow:hidden;}
.dart{width:10px;height:30px;background:black;position:absolute;border-radius:3px;}
#playerSelect,#dartSelect,#launchControls{margin-top:20px;}
#powerBar{height:20px;width:200px;background:lightgray;border-radius:5px;margin:10px auto;overflow:hidden;}
.power{height:100%;width:0%;background:limegreen;}
#scoreBoard{margin-top:10px;font-weight:bold;}
</style>
</head>
<body>

<h1>üéØ US Gov Dart Challenge</h1>

<div id="playerSelect">
  <h3>Select Mode:</h3>
  <button onclick="startSingle()">Single Player</button>
  <button onclick="startMulti()">Multiplayer</button>
</div>

<div id="gameContainer" style="display:none;">
  <div id="questionBox">
    <h2 id="question"></h2>
    <div id="answers"></div>
  </div>

  <div id="scoreBoard"></div>

  <div id="dartSelect" style="display:none;">
    <h3>Select Your Dart:</h3>
    <button onclick="selectDart('red')">üî¥ Red</button>
    <button onclick="selectDart('blue')">üîµ Blue</button>
    <button onclick="selectDart('green')">üü¢ Green</button>
  </div>

  <div id="launchControls" style="display:none;">
    <label>Power: <input type="range" id="powerSlider" min="10" max="100" value="50"></label><br>
    <label>Angle: <input type="range" id="angleSlider" min="10" max="80" value="45"></label><br>
    <label>Wind: <input type="range" id="windSlider" min="-20" max="20" value="0"></label><br>
    <button onclick="launchDart()">Launch Dart</button>
  </div>

  <div id="dartboard"></div>
  <h2 id="result"></h2>
</div>

<script>
const questions = [
  {q:"Which branch of government makes the laws?", a:["Legislative","Executive","Judicial"], c:0},
  {q:"Which branch enforces the laws?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"Which branch interprets the laws?", a:["Judicial","Executive","Legislative"], c:0},
  {q:"Congress is part of which branch?", a:["Judicial","Legislative","Executive"], c:1},
  {q:"The President leads which branch?", a:["Legislative","Executive","Judicial"], c:1},
  {q:"The Supreme Court is part of which branch?", a:["Executive","Judicial","Legislative"], c:1},
  {q:"What is the main responsibility of the Legislative Branch?", a:["Enforce laws","Make laws","Interpret laws"], c:1},
  {q:"Who helps the President run the Executive Branch?", a:["Congress","Cabinet","Supreme Court"], c:1},
  {q:"Which branch can declare laws unconstitutional?", a:["Judicial","Legislative","Executive"], c:0},
  {q:"Which branch approves the federal budget?", a:["Executive","Legislative","Judicial"], c:1},
  {q:"Who can issue executive orders?", a:["Congress","President","Supreme Court"], c:1},
  {q:"What does the Judicial Branch use to review laws?", a:["Judicial review","Impeachment","Treaties"], c:0},
  {q:"Which branch conducts oversight investigations?", a:["Legislative","Judicial","Executive"], c:0},
  {q:"Recognizing foreign nations is a duty of which branch?", a:["Executive","Legislative","Judicial"], c:0},
  {q:"Who sentences offenders and establishes judicial procedures?", a:["Congress","Supreme Court","President"], c:1},
];

let players = [];
let currentPlayer = 0;
let questionIndex = 0;
let selectedDart = 'black';
const dartboard = document.getElementById('dartboard');
const qBox = document.getElementById('question');
const ansBox = document.getElementById('answers');
const result = document.getElementById('result');
const scoreBoard = document.getElementById('scoreBoard');

function startSingle() {
  players = [{name:"Player 1", score:0}];
  startGame();
}

function startMulti() {
  const p1 = prompt("Enter Player 1 Name:", "Player 1");
  const p2 = prompt("Enter Player 2 Name:", "Player 2");
  players = [{name:p1||"Player 1", score:0},{name:p2||"Player 2", score:0}];
  startGame();
}

function startGame() {
  document.getElementById('playerSelect').style.display="none";
  document.getElementById('gameContainer').style.display="block";
  questionIndex=0; currentPlayer=0;
  renderScore();
  loadQuestion();
}

function renderScore(){
  scoreBoard.innerHTML = players.map(p=>`${p.name}: ${p.score}`).join(" | ");
}

function loadQuestion(){
  if(questionIndex>=questions.length){
    prepareDartPhase();
    return;
  }
  const q = questions[questionIndex];
  qBox.textContent = `${players[currentPlayer].name}'s turn: ${q.q}`;
  ansBox.innerHTML = "";
  q.a.forEach((opt,i)=>{
    let btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = ()=>checkAnswer(i);
    ansBox.appendChild(btn);
  });
}

function checkAnswer(i){
  if(i === questions[questionIndex].c){
    players[currentPlayer].score++;
  }
  renderScore();
  currentPlayer++;
  if(currentPlayer>=players.length){
    currentPlayer=0;
    questionIndex++;
  }
  loadQuestion();
}

// --- Dart Phase ---
function prepareDartPhase(){
  qBox.textContent="All questions answered! Select your dart.";
  ansBox.innerHTML="";
  document.getElementById('dartSelect').style.display='block';
}

function selectDart(color){
  selectedDart = color;
  document.getElementById('dartSelect').style.display='none';
  document.getElementById('launchControls').style.display='block';
  result.textContent=`${players[currentPlayer].name}, adjust power, angle, wind, then launch!`;
}

// Launch dart with physics
function launchDart(){
  const power = Number(document.getElementById('powerSlider').value);
  const angle = Number(document.getElementById('angleSlider').value);
  const wind = Number(document.getElementById('windSlider').value);

  const dart = document.createElement('div');
  dart.className='dart';
  dart.style.background = selectedDart;
  dartboard.appendChild(dart);

  let posX = 180, posY = 0;
  let rad = angle * Math.PI / 180;
  let velX = power * Math.cos(rad)/2 + wind; 
  let velY = power * Math.sin(rad)/2;
  const gravity = 1;

  const interval = setInterval(()=>{
    posX += velX;
    posY += velY;
    velY -= gravity;
    if(posY<=0){
      posY=0; clearInterval(interval);
      dartScore(dart,posX,posY);
    }
    dart.style.left = posX + 'px';
    dart.style.bottom = posY + 'px';
  },20);
}

// Score based on landing
function dartScore(dart,x,y){
  const center = 200; // center of dartboard
  const dx = x-center; const dy = y-center;
  const distance = Math.sqrt(dx*dx + dy*dy);
  let points=0;
  if(distance<40) points=10;
  else if(distance<80) points=8;
  else if(distance<120) points=6;
  else if(distance<160) points=4;
  else points=2;
  players[currentPlayer].score += points;
  renderScore();
  nextDartTurn();
}

function nextDartTurn(){
  currentPlayer++;
  if(currentPlayer>=players.length){
    endGame();
  } else {
    document.getElementById('launchControls').style.display='block';
    result.textContent=`${players[currentPlayer].name}, adjust power, angle, wind, then launch!`;
  }
}

function endGame(){
  document.getElementById('launchControls').style.display='none';
  let maxScore = Math.max(...players.map(p=>p.score));
  let winners = players.filter(p=>p.score===maxScore).map(p=>p.name).join(", ");
  result.textContent = `üèÜ Winner(s): ${winners} with ${maxScore} points!`;
}

</script>

</body>
</html>
